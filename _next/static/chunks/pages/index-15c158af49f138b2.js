(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(5420)}])},5420:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return X}});var r=t(5893),a=t(7294),s=t(4671),o=t(8172),l=function(e,n){var t,r,a=Array.isArray(n)?n:"string"===typeof n?n.split("."):n;for(t=e,r=0;t&&r<a.length;++r)t=t[a[r]];return t},c=(0,s.Z)((function(e){return{blocks:{},selectedId:"block_init",selectedPage:"homepage",selectedDescription:"",selectedProject:"firstproject",panel:{right:!1,rescent:!1},setAttr:function(n){return e((0,o.ZP)((function(e){!function(e,n,t){var r=n.split("."),a=r.pop(),s=r.reduce((function(e,n){return e[n]=e[n]||{}}),e);s[a]=t}(e,n.path,n.value)})))},pushElement:function(n){return e((0,o.ZP)((function(e){l(e,n.path).push(n.element)})))},removeElement:function(n){return e((0,o.ZP)((function(e){l(e,n.path).splice(n.index,1)})))}}})),i={firstproject:{nicename:"First project",description:"TailBlaster starter project",pages:{homepage:{nicename:"Home page",thumbnail:null,blocks:{block_init:{content:'<div class="bg-gradient-to-r from-cyan-100 to-blue-100 shadow p-9 rounded gap-3 my-24 container mx-auto">\n        \n  \x3c!-- Hero section --\x3e\n  <h1 class="font-bold text-3xl col-span-2">\n    Welcome to TailBlaster\n  </h1>\n  <p class="text-gray-600">\n    Component base manual TailWind Editor\n  </p>\n  <p class="text-blue-600 cursor-pointer">\n    Click me to edit\n  </p>\n  <div class="text-sm text-slate-600 flex justify-end">\n  \n        \x3c!-- Tips card --\x3e\n        <div class="border rounded">\n          <div class="px-3 py-1.5 border-b bg-orange-50">\n            Tips:\n          </div>\n          <div class="px-3 py-1.5 bg-slate-50 bg-opacity-70">\n            <ul>\n              <li>Ctr+S: save page</li>\n              <li>Ctrl+O: open saved</li>\n              <li>Ctrl+D: local data</li>\n            </ul>\n          </div>\n      </div>\n  </div>\n</div>',children:[]}}}}}},d={content:'<p class="bg-green-300 rounded p-3 m-3 shadow border border-green-600">\nNew child component with green background\n</p>',children:[]},u={content:'<p class="bg-violet-300 rounded p-3 m-3 shadow border border-violet-600">\nNew child component with violet background\n</p>',children:[]},p={content:'<p class="bg-sky-300 rounded p-3 m-3 shadow border border-sky-600">\nNew child component with sky background\n</p>',children:[]},h={content:'<p class="bg-slate-300 rounded p-3 m-3 shadow border border-slate-600">\nNew child component with slate background\n</p>',children:[]},m={content:'<p class="bg-orange-300 rounded p-3 m-3 shadow border border-orange-600">\nNew child component with orange background\n</p>',children:[]},g={content:'<p class="bg-amber-300 rounded p-3 m-3 shadow border border-amber-600">\nNew child component with amber background\n</p>',children:[]},x={content:'<p class="bg-cyan-300 rounded p-3 m-3 shadow border border-cyan-600">\nNew child component with cyan background\n</p>',children:[]},f=t(3491),b=t(460),v=t.n(b),j=t(8325),y=(t(5433),t(9980),t(1799)),N=t(9396),w=t(1120),k=t.n(w),C=t(4670),S=function(e){document.getElementById("mytextarea_id").focus(),document.execCommand("insertText",!1,"\n\n\x3c!--component --\x3e\n{".concat(e,"}\n"))},I=function(){var e=window.location.href.split("#")[1];if(e){if(e.includes("/")){var n=e.split("/");return{project:n[0],page:n[1]}}return window.location.href="#firstproject/homepage",{project:"firstproject",page:"homepage"}}return window.location.href="#firstproject/homepage",{project:"firstproject",page:"homepage"}},P=t(797),E=(t(3733),function(e){var n=e.children;return(0,r.jsx)("div",{className:"flex gap-1 border-b border-gray-900 p-3 items-center justify-between",children:n})}),_=function(e){var n=e.children;return(0,r.jsx)("div",{className:"flex items-center border-b border-gray-900 p-3 text-slate-500",children:n})},A=t(7219),F=function(e){e.className;var n=e.children,t=e.onClick,a=e.selectedState,s=void 0!==a&&a,o=e.width,l=void 0===o?"":o;return(0,r.jsx)("button",{onClick:t,title:"Button","aria-label":"Button",className:"".concat(s?"bg-slate-900":"bg-slate-700"," ").concat("max"==l?"w-max":" w-full","  cursor-pointer border-b border-gray-900 p-3 text-yellow-600   hover:bg-slate-900"),children:n})},T=function(){var e,n,t=c((function(e){return e.blocks})),a=c((function(e){return e.panel})),s=c((function(e){return e.selectedId})),o=c((function(e){return e.setAttr}));return(0,r.jsxs)("div",{className:"border-l border-gray-900 -mr-px ",children:[(null===(e=t[s])||void 0===e?void 0:e.children.length)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(_,{children:"Register childrens:"}),null===(n=t[s])||void 0===n?void 0:n.children.map((function(e){return(0,r.jsxs)(E,{children:[(0,r.jsx)("span",{className:"text-sky-400 shadow",children:(0,r.jsx)(A.ND7,{})}),e,(0,r.jsxs)("div",{className:"flex gap-1",children:[(0,r.jsx)("div",{className:"p-1 border border-stone-600 rounded cursor-pointer",children:(0,r.jsx)(A.V7f,{})}),(0,r.jsx)("div",{className:"p-1 border border-stone-600 rounded cursor-pointer",children:(0,r.jsx)(A.Siq,{})})]})]})}))]}):(0,r.jsx)(_,{children:"Dont have registered childrens"}),(0,r.jsx)(F,{onClick:function(){var e={newComponent0:d,newComponent1:u,newComponent2:p,newComponent3:h,newComponent4:m,newComponent5:g,newComponent6:x},n=(C.characters("0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_$"),"block_".concat(C.generate()));o({path:"blocks.".concat(n),value:e["newComponent".concat(Math.floor(5*Math.random()))]}),o({path:"blocks.".concat(s,".children"),value:(0,P.Z)(t[s].children).concat([n])}),o({path:"panel.rescent",value:!1}),S(n)},children:"Add new"}),(0,r.jsx)(F,{onClick:function(){return o({path:"panel.rescent",value:!a.rescent})},selectedState:a.rescent,children:"Add rescent"})]})},B=function(e){return e[0]},O=function(e){return D(e[1],e[0])},Z=function(e,n,t){var r=n.split("."),a=r.pop(),s=r.reduce((function(e,n){return e[n]=e[n]||{}}),e);s[a]=t},D=function(e,n){var t,r,a=Array.isArray(n)?n:"string"===typeof n?n.split("."):n;for(t=e,r=0;t&&r<a.length;++r)t=t[a[r]];return t},H=function(e){var n=e.form,t=e.bottomSpace,a=void 0===t||t,s=e.type,o=void 0===s?"text":s;return(0,r.jsx)("input",{className:"border border-gray-400 bg-gray-800 w-full p-3 ".concat(a?"mb-3":""),id:B(n),onChange:function(e){return function(e,n){var t=Object.assign({},e[1]);Z(t,e[0],n),e[2](t)}(n,e.target.value)},defaultValue:O(n),type:o})},J=function(){var e=c((function(e){return e.blocks})),n=c((function(e){return e.selectedId}));return(0,r.jsxs)("div",{className:"relative flex-1 min-h-[70%] border-t border-gray-900",children:[(0,r.jsxs)(_,{children:[(0,r.jsx)("span",{className:"w-max mr-24",children:"Select rescent components"}),(0,r.jsxs)("div",{className:"flex flex-1",children:[(0,r.jsx)(H,{bottomSpace:!1,form:[]}),(0,r.jsx)(F,{width:"max",children:"Search"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-3 p-3 gap-1",children:[Object.keys(e).map((function(t){return t!=n&&"block_init"!=t?(0,r.jsxs)("div",{onClick:function(){S(t)},className:"border border-gray-600 ",children:[(0,r.jsx)("div",{className:"h-24 p-1 overflow-hidden",children:(0,r.jsx)(f.Z,{string:e[t].content})}),(0,r.jsx)("div",{className:"bg-gray-600 p-3",children:t})]}):(0,r.jsx)(r.Fragment,{})})),0===e.length?(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)("p",{children:"You dont create any components yet! "}),(0,r.jsx)("p",{children:"Add some new components to reusable it as rescent compoonents"})]}):null]})]})},M=function(e){var n=e.showClose,t=void 0===n||n,a=c((function(e){return e.panel})),s=c((function(e){return e.setAttr}));return(0,r.jsxs)("div",{className:"absolute -ml-10 top-3",children:[(0,r.jsx)("div",{onClick:function(){"editor"===a.right?s({path:"panel.right",value:!1}):s({path:"panel.right",value:"editor"})},className:"".concat("editor"===a.right?"bg-slate-800":"bg-slate-700"," flex p-3  rounded-l hover:text-slate-200 cursor-pointer border-b border-slate-600"),children:(0,r.jsx)(A.xqv,{})}),(0,r.jsx)("div",{onClick:function(){"loadpage"===a.right?s({path:"panel.right",value:!1}):s({path:"panel.right",value:"loadpage"})},className:"".concat("loadpage"===a.right?"bg-slate-800":"bg-slate-700"," flex p-3  rounded-l hover:text-slate-200 cursor-pointer border-b border-slate-600"),children:(0,r.jsx)(A.tHe,{})}),(0,r.jsx)("div",{onClick:function(){"savepage"===a.right?s({path:"panel.right",value:!1}):s({path:"panel.right",value:"savepage"})},className:"".concat("savepage"===a.right?"bg-slate-800":"bg-slate-700"," flex p-3  rounded-l hover:text-slate-200 cursor-pointer border-b border-slate-600"),children:(0,r.jsx)(A.mW3,{})}),(0,r.jsx)("div",{onClick:function(){"componentslibrary"===a.right?s({path:"panel.right",value:!1}):s({path:"panel.right",value:"componentslibrary"})},className:"".concat("componentslibrary"===a.right?"bg-slate-800":"bg-slate-700"," flex p-3  rounded-l hover:text-slate-200 cursor-pointer border-b border-slate-600"),children:(0,r.jsx)(A.aCJ,{})}),(0,r.jsx)("div",{onClick:function(){"datalayer"===a.right?s({path:"panel.right",value:!1}):s({path:"panel.right",value:"datalayer"})},className:"".concat("datalayer"===a.right?"bg-slate-800":"bg-slate-700"," flex p-3  rounded-l hover:text-slate-200 cursor-pointer border-b border-slate-600"),children:(0,r.jsx)(A.bGz,{})}),t?(0,r.jsx)("div",{onClick:function(){return s({path:"panel.right",value:!1})},className:" p-3 bg-slate-700 rounded-l hover:text-slate-200 cursor-pointer border-b border-slate-600",children:(0,r.jsx)(A.Tfp,{})}):null]})},z=function(){var e=c((function(e){return e.blocks})),n=c((function(e){return e.panel})),t=c((function(e){return e.selectedId})),s=c((function(e){return e.setAttr})),o=(0,a.useState)(e[t].content),l=o[0],i=o[1],d=(0,a.useState)(!0),u=d[0],p=d[1];return(0,a.useEffect)((function(){i(e[t].content)}),[t]),(0,a.useEffect)((function(){!function(e){var n=document.createElement("div");return n.innerHTML=e,n.innerHTML===e}(l)?p(!1):(p(!0),s({path:"blocks.".concat(t,".content"),value:l}))}),[l]),(0,r.jsxs)("div",{className:" text-slate-400 top-0 w-2/3 max-h-screen bg-gray-800 flex flex-col",children:[(0,r.jsx)(M,{}),(0,r.jsxs)("div",{className:"flex-1 text-sm flex",children:[(0,r.jsxs)("div",{className:"flex-1 flex flex-col justify-between",children:[(0,r.jsx)("div",{className:"text-slate-500 p-3",children:t}),u?null:(0,r.jsx)("div",{className:"p-3 bg-red-700 text-white",children:"Html code isnt valid"}),(0,r.jsx)("div",{className:"flex-1 max-h-[90vh] overflow-y-scroll scrollbar scrollbar-thin scrollbar-thumb-stone-800 scrollbar-track-stone-600",children:(0,r.jsx)(v(),{textareaId:"mytextarea_id",autoFocus:!0,value:l,onValueChange:function(e){return i(e)},highlight:function(e){return(0,j.highlight)(e,j.languages.js)},padding:10,style:{border:"1px solid #1f293700",fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:14}})}),n.rescent?(0,r.jsx)(J,{}):null]}),(0,r.jsx)(T,{})]})]})},L=function(){var e=c((function(e){return e.blocks})),n=(c((function(e){return e.selectedId})),c((function(e){return e.selectedPage}))),t=c((function(e){return e.selectedProject})),s=(c((function(e){return e.setAttr})),(0,a.useState)(!0)),o=s[0],l=s[1],i=(0,a.useState)({name:n,description:"",thumbnail:""}),d=i[0],u=i[1];return(0,a.useEffect)((function(){!function(e,n,t){setTimeout((function(){k()(document.getElementById("mainFrame"),{allowTaint:!0,imageTimeout:500,logging:!0}).then((function(r){var a=r.toDataURL("image/png",1),s=new Image;s.src=a,document.getElementById("thumbnail").appendChild(s),e(!1),n((0,N.Z)((0,y.Z)({},t),{thumbnail:a}))}))}),500)}(l,u,d)}),[]),(0,r.jsxs)("div",{className:" text-slate-400 top-0 w-2/3 max-h-screen bg-gray-800 flex flex-col",children:[(0,r.jsx)(M,{}),(0,r.jsxs)("div",{className:"flex-1 text-sm",children:[(0,r.jsx)(_,{children:"Save page"}),(0,r.jsxs)("div",{className:"grid p-3 grid-cols-2 gap-3",children:[(0,r.jsx)("div",{className:"flex flex-col gap-1 items-start",children:(0,r.jsxs)("form",{onSubmit:function(r){r.preventDefault();var a=JSON.parse(sessionStorage.getItem("tailBlasterProjects"));d.name===n?a[t].pages[n].blocks=e:a[t].pages[d.name]={nicename:"",thumbnail:"",blocks:e,children:[]},sessionStorage.setItem("tailBlasterProjects",JSON.stringify(a))},children:[(0,r.jsx)("label",{children:"Insert page title"}),(0,r.jsx)(H,{form:["name",d,u]}),(0,r.jsx)("label",{children:"Description"}),(0,r.jsx)("textarea",{className:"border border-gray-400 bg-gray-800 w-full p-3 mb-3 scrollbar"}),(0,r.jsx)(F,{children:"Save"})]})}),(0,r.jsxs)("div",{className:"shadow border border-slate-900 p-4 rounded-lg bg-slate-700",children:[(0,r.jsxs)("div",{className:"pb-1.5 flex",children:[(0,r.jsx)("div",{className:"mr-3",children:"Page previev"}),o?(0,r.jsxs)("svg",{className:"animate-spin h-5 w-5 mr-3 ...",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):null]}),(0,r.jsx)("div",{className:"relative border border-slate-900 max-h-[30vh] overflow-y-scroll scroll",id:"thumbnail"})]})]})]})]})},V=function(){var e=c((function(e){return e.setAttr})),n=c((function(e){return e.selectedProject})),t=(0,a.useState)({}),s=t[0],o=t[1];return(0,a.useEffect)((function(){var e=JSON.parse(sessionStorage.getItem("tailBlasterProjects"));o(e[n].pages),console.log(s)}),[]),(0,r.jsxs)("div",{className:" text-slate-400 top-0 w-2/3 max-h-screen bg-gray-800 flex flex-col",children:[(0,r.jsx)(M,{}),(0,r.jsxs)("div",{className:"flex-1 text-sm",children:[(0,r.jsx)(_,{children:"Load page"}),(0,r.jsx)("div",{className:"flex p-3 gap-3",children:Object.keys(s).map((function(n){return console.log(n),(0,r.jsxs)("div",{onClick:function(){window.location.href="#firstproject/".concat(n),e({path:"selectedPage",value:n})},className:"bg-slate-700 hover:bg-slate-900 cursor-pointer p-3 rounded flex items-center gap-1",children:[" ",(0,r.jsx)(A.tHe,{}),n]})}))})]})]})},W=function(){c((function(e){return e.blocks})),c((function(e){return e.selectedId})),c((function(e){return e.setAttr}));return(0,r.jsxs)("div",{className:" text-slate-400 top-0 w-2/3 max-h-screen bg-gray-800 flex flex-col",children:[(0,r.jsx)(M,{}),(0,r.jsxs)("div",{className:"flex-1 text-sm",children:[(0,r.jsx)(_,{children:"Components library"}),(0,r.jsx)("p",{className:"p-3",children:" * Not avilable on this ver."})]})]})},q=function(){c((function(e){return e.blocks})),c((function(e){return e.selectedId})),c((function(e){return e.setAttr}));return(0,r.jsxs)("div",{className:" text-slate-400 top-0 w-2/3 max-h-screen bg-gray-800 flex flex-col",children:[(0,r.jsx)(M,{}),(0,r.jsxs)("div",{className:"flex-1 text-sm",children:[(0,r.jsx)(_,{children:"Data layer"}),(0,r.jsx)("p",{className:"p-3",children:" * Not avilable on this ver."})]})]})},R=function(){var e=c((function(e){return e.blocks})),n=c((function(e){return e.selectedId})),t=c((function(e){return e.selectedPage})),s=c((function(e){return e.setAttr})),o=c((function(e){return e.panel}));(0,a.useEffect)((function(){var e=!1;document.onkeyup=function(n){console.log(n.keyCode),17==n.keyCode&&(e=!1)},document.onkeydown=function(n){return 17==n.keyCode&&(e=!0),83==n.keyCode&&1==e?(s({path:"panel.right",value:"savepage"}),!1):79==n.keyCode&&1==e?(s({path:"panel.right",value:"loadpage"}),!1):68==n.keyCode&&1==e?(s({path:"panel.right",value:"datalayer"}),!1):void 0};var n=I();s({path:"selectedPage",value:n.page})})),(0,a.useEffect)((function(){var e=I(),n=JSON.parse(sessionStorage.getItem("tailBlasterProjects"));n||(sessionStorage.setItem("tailBlasterProjects",JSON.stringify(i)),n=i),e.project&&e.page?s({path:"blocks",value:n[e.project].pages[e.page].blocks}):alert("load data error")}),[t]);var l=function(e){var t,a=e.data,o=e.name,c=e.values,i=void 0===c?{foo:"bar"}:c;return console.log(a,o,i),(null===(t=a[o])||void 0===t?void 0:t.children)&&a[o].children.map((function(e){i[e]=(0,r.jsx)(l,{data:a,name:e})})),a[o]?(0,r.jsx)("div",{onClick:function(e){e.stopPropagation(),s({path:"selectedId",value:o}),s({path:"panel.right",value:"editor"}),s({path:"panel.rescent",value:!1})},className:"".concat(n==o?"border-solid border-stone-400":"border-dashed border-stone-200"," border"),children:(0,r.jsx)(f.Z,{string:a[o].content,values:i})}):null},d=Object.keys(e)[0];return(0,r.jsxs)("div",{className:"relative flex h-screen overflow-hidden w-full",children:[(0,r.jsx)("div",{id:"mainFrame",className:"flex-1 h-max",children:(0,r.jsx)(l,{data:e,name:d})}),"editor"===o.right?(0,r.jsx)(z,{}):(0,r.jsx)(r.Fragment,{}),"savepage"===o.right?(0,r.jsx)(L,{}):(0,r.jsx)(r.Fragment,{}),"loadpage"===o.right?(0,r.jsx)(V,{}):(0,r.jsx)(r.Fragment,{}),"componentslibrary"===o.right?(0,r.jsx)(W,{}):(0,r.jsx)(r.Fragment,{}),"datalayer"===o.right?(0,r.jsx)(q,{}):(0,r.jsx)(r.Fragment,{}),!1===o.right?(0,r.jsx)("div",{className:"text-gray-400",children:(0,r.jsx)(M,{showClose:!1})}):(0,r.jsx)(r.Fragment,{})]})};R.getInitialProps=function(){return{}};var X=R}},function(e){e.O(0,[443,508,774,888,179],(function(){return n=8312,e(e.s=n);var n}));var n=e.O();_N_E=n}]);